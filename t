var o=document.createElement("div");function Y(){for(C=[d=K-38],c=0,i=4;i--*K;K-13?c+=!Z[h+p+d]:c-=!Z[h+(C[i]=p*A-145*Math.round(p/A))])p=B[i];for(!t|c+4?!(c-4)&&(h+=d):B=C,f=K=i=0;i<4;f+=Z[A+p])X[p=h+B[i++]]=1;if(e=!e){if(f|B){for(l=228;i--;)Z[h+B[i]]=k=1;for(B=[[-7,-20,6,17,-9,3,6][t=++t%7]-4,0,1,t-6?-A:-1];l--;h=5)if(l%A)l-=l%A*!Z[l];else for(P+=k++,j=l+=A;--j>A;)Z[j]=Z[j-A]}h+=A}for(i=S="";i<240;X[i]=Z[i]|=++i%A<2|i>228)i%A||(S+="<br>"),S+=X[i]?"回":"　";o.innerHTML=S+P,Z[5]||setTimeout(Y,99-P)}document.body.setAttribute("onKeyDown","K=event.keyCode"),document.body.appendChild(o),X=[Z=[B=A=12]],h=e=K=t=P=0,Y();
